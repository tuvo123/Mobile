jQuery(function(n) {
    var a = attach.allowed_extensions.replace(" ", "").split(",");
    n("#commentform").attr("enctype", "multipart/form-data"), n("#do_uploadFile").click(function() {
        n("#ywar-uploadFile").click()
    }), n("#ywar-uploadFile").on("change", function() {
        n(".ywar-attachment-notice").remove();
        var t = this;
        if (0 < attach.limit_multiple_upload && t.files.length > attach.limit_multiple_upload) return n(this).closest(".upload_section").append('<p class="ywar-attachment-notice">' + attach.too_many_attachment_selected + "</p>"), void(t.value = "");
        for (var e = document.getElementById("uploadFileList"); e.hasChildNodes();) e.removeChild(e.firstChild);
        for (var a, i = 0, l = 0; l < t.files.length; l++) o(t.files[l]) ? ((a = document.createElement("li")).innerHTML = '<div style="display: inline;"><img id="img_preview' + l + '" style="width: 100px; height: 100px;"></div>', function(t, e) {
            var a = new FileReader;
            a.readAsDataURL(t[e]), a.onload = function(t) {
                document.getElementById("img_preview" + e).src = t.target.result
            }
        }(t.files, l), e.appendChild(a)) : i++;
        i ? n(this).closest(".upload_section").append('<p class="ywar-attachment-notice">' + attach.attachments_failed_validation + "</p>") : e.hasChildNodes() || ((a = document.createElement("li")).innerHTML = attach.no_attachment_selected, e.appendChild(a))
    });
    var o = function(t) {
        var e = t.name.lastIndexOf(".") + 1,
            e = t.name.substring(e).toLowerCase();
        if (-1 == n.inArray(e, a)) return !1;
        if (0 < attach.allowed_max_size && t.size / 1024 / 1024 > attach.allowed_max_size) return !1;
        return !0
    };
    n("#commentform").submit(function() {
        var t = document.getElementById("ywar-uploadFile");
        if (null != t && 0 < attach.limit_multiple_upload && t.files.length > attach.limit_multiple_upload) return !1
    })
});